{% extends "base.html" %}

{% block title %}–ú–æ—ó –ø–æ—ó–∑–¥–∫–∏ - Travel Planner{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2>–ú–æ—ó –ø–æ—ó–∑–¥–∫–∏</h2>
        <p class="text-muted">–í—ñ—Ç–∞—î–º–æ, {{ current_user.username }}! üëã</p>
    </div>
    <a href="{{ url_for('new_trip') }}" class="btn btn-primary btn-lg">
        <i class="bi bi-plus-circle"></i> –ù–æ–≤–∞ –ø–æ—ó–∑–¥–∫–∞
    </a>
</div>

{% if trips %}
    <div class="row">
        {% for trip in trips %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 trip-card">
                <div class="card-body">
                    <h5 class="card-title">{{ trip.title }}</h5>
                    <h6 class="card-subtitle mb-3 text-muted">
                        <i class="bi bi-geo-alt"></i> {{ trip.destination }}
                    </h6>

                    <div class="trip-info">
                        <p class="mb-2">
                            <i class="bi bi-calendar-range"></i>
                            <small>{{ trip.start_date.strftime('%d.%m.%Y') }} - {{ trip.end_date.strftime('%d.%m.%Y') }}</small>
                        </p>
                        <p class="mb-2">
                            <i class="bi bi-hourglass-split"></i>
                            <small>{{ (trip.end_date - trip.start_date).days + 1 }} –¥–Ω—ñ–≤</small>
                        </p>
                        <p class="mb-3">
                            <i class="bi bi-wallet2"></i>
                            <strong>{{ "%.0f"|format(trip.budget) }} –≥—Ä–Ω</strong>
                        </p>
                    </div>

                    <div class="d-flex gap-2">
                        <a href="{{ url_for('view_trip', trip_id=trip.id) }}" class="btn btn-sm btn-primary flex-grow-1">
                            –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏
                        </a>
                        <a href="{{ url_for('edit_trip', trip_id=trip.id) }}" class="btn btn-sm btn-outline-warning">
                            ‚úèÔ∏è
                        </a>
                    </div>
                </div>
                <div class="card-footer text-muted">
                    <small>–°—Ç–≤–æ—Ä–µ–Ω–æ: {{ trip.created_at.strftime('%d.%m.%Y') }}</small>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="text-center py-5">
        <div class="mb-4">
            <i class="bi bi-suitcase" style="font-size: 4rem; color: #ccc;"></i>
        </div>
        <h3 class="text-muted">–£ –≤–∞—Å –ø–æ–∫–∏ –Ω–µ–º–∞—î –ø–æ—ó–∑–¥–æ–∫</h3>
        <p class="text-muted mb-4">–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–≤–æ—é –ø–µ—Ä—à—É –ø–æ–¥–æ—Ä–æ–∂ —ñ –ø–æ—á–Ω—ñ—Ç—å –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è!</p>
        <a href="{{ url_for('new_trip') }}" class="btn btn-primary btn-lg">
            <i class="bi bi-plus-circle"></i> –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–µ—Ä—à—É –ø–æ—ó–∑–¥–∫—É
        </a>
    </div>
{% endif %}
{% endblock %}