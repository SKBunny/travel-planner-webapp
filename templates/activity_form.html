{% extends "base.html" %}

{% block title %}
    {% if activity %}–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å{% else %}–ù–æ–≤–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å{% endif %} - Travel Planner
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="mb-3">
            <a href="{{ url_for('view_trip', trip_id=trip.id) }}" class="btn btn-outline-secondary">
                ‚Üê –ù–∞–∑–∞–¥ –¥–æ –ø–æ—ó–∑–¥–∫–∏
            </a>
        </div>
        
        <div class="card">
            <div class="card-body">
                <h2 class="card-title mb-4">
                    {% if activity %}
                        –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
                    {% else %}
                        –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
                    {% endif %}
                </h2>
                <p class="text-muted">–ü–æ—ó–∑–¥–∫–∞: <strong>{{ trip.title }}</strong></p>
                
                <form method="POST">
                    <div class="mb-3">
                        <label for="title" class="form-label">–ù–∞–∑–≤–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ *</label>
                        <input type="text" class="form-control" id="title" name="title" 
                               value="{% if activity %}{{ activity.title }}{% endif %}" 
                               placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è –ï–π—Ñ–µ–ª–µ–≤–æ—ó –≤–µ–∂—ñ" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">–û–ø–∏—Å</label>
                        <textarea class="form-control" id="description" name="description" 
                                  rows="3" placeholder="–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å...">{% if activity %}{{ activity.description }}{% endif %}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="date" class="form-label">–î–∞—Ç–∞ *</label>
                            <input type="date" class="form-control" id="date" name="date" 
                                   value="{% if activity %}{{ activity.date.strftime('%Y-%m-%d') }}{% endif %}"
                                   min="{{ trip.start_date.strftime('%Y-%m-%d') }}"
                                   max="{{ trip.end_date.strftime('%Y-%m-%d') }}" required>
                            <small class="text-muted">–í—ñ–¥ {{ trip.start_date.strftime('%d.%m.%Y') }} –¥–æ {{ trip.end_date.strftime('%d.%m.%Y') }}</small>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="time" class="form-label">–ß–∞—Å</label>
                            <input type="time" class="form-control" id="time" name="time" 
                                   value="{% if activity %}{{ activity.time }}{% endif %}">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="location" class="form-label">–õ–æ–∫–∞—Ü—ñ—è</label>
                        <input type="text" class="form-control" id="location" name="location" 
                               value="{% if activity %}{{ activity.location }}{% endif %}" 
                               placeholder="–ú—ñ—Å—Ü–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ">
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="category" class="form-label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label>
                            <select class="form-select" id="category" name="category">
                                <option value="general" {% if activity and activity.category == 'general' %}selected{% endif %}>
                                    üéØ –ó–∞–≥–∞–ª—å–Ω–µ
                                </option>
                                <option value="transport" {% if activity and activity.category == 'transport' %}selected{% endif %}>
                                    üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
                                </option>
                                <option value="food" {% if activity and activity.category == 'food' %}selected{% endif %}>
                                    üçΩÔ∏è –á–∂–∞
                                </option>
                                <option value="activity" {% if activity and activity.category == 'activity' %}selected{% endif %}>
                                    üé° –†–æ–∑–≤–∞–≥–∏
                                </option>
                                <option value="accommodation" {% if activity and activity.category == 'accommodation' %}selected{% endif %}>
                                    üè® –ü—Ä–æ–∂–∏–≤–∞–Ω–Ω—è
                                </option>
                                <option value="shopping" {% if activity and activity.category == 'shopping' %}selected{% endif %}>
                                    üõçÔ∏è –ü–æ–∫—É–ø–∫–∏
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="cost" class="form-label">–í–∞—Ä—Ç—ñ—Å—Ç—å (–≥—Ä–Ω)</label>
                            <input type="number" class="form-control" id="cost" name="cost" 
                                   step="0.01" value="{% if activity %}{{ activity.cost }}{% else %}0{% endif %}">
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">
                            {% if activity %}–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏{% else %}–î–æ–¥–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å{% endif %}
                        </button>
                        <a href="{{ url_for('view_trip', trip_id=trip.id) }}" class="btn btn-outline-secondary">
                            –°–∫–∞—Å—É–≤–∞—Ç–∏
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}